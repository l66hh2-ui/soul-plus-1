<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… SOUL PLUS</title>
    <style>
        body { background: #0a192f; color: white; font-family: sans-serif; padding: 20px; text-align: center; }
        .container { background: #112240; padding: 20px; border-radius: 20px; max-width: 450px; margin: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .logo { width: 120px; margin-bottom: 20px; }
        input { width: 90%; padding: 12px; margin: 10px 0; border-radius: 10px; border: 1px solid #233554; background: #0a192f; color: white; outline: none; }
        button { background: #64ffda; color: #0a192f; padding: 15px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; width: 95%; font-size: 16px; margin-top: 10px; }
        #status { margin-top: 15px; font-size: 14px; }
    </style>
</head>
<body>

<div class="container">
    <img src="https://l66hh2-ui.github.io/soul-plus-1/soul-icon.png" class="logo">
    <h2>Ø¥Ø¶Ø§ÙØ© ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯</h2>
    <input type="text" id="name" placeholder="Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Ù…Ø«Ù„Ø§Ù‹: ÙŠÙˆØ¯Ù„ Ø¨Ù„Ø³)">
    <input type="text" id="desc" placeholder="ÙˆØµÙ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚">
    <input type="text" id="icon" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©">
    <input type="text" id="plist" placeholder="Ø±Ø§Ø¨Ø· Ù…Ù„Ù Ø§Ù„Ù€ Plist">
    <button onclick="addApp()">Ù†Ø´Ø± ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø± ÙÙˆØ±Ø§Ù‹ ğŸš€</button>
    <p id="status"></p>
</div>

<script>
    // Ø§Ù„ØªÙˆÙƒÙ† Ø­Ù‚Ùƒ ØªÙ… ÙˆØ¶Ø¹Ù‡ Ù‡Ù†Ø§ Ø¨Ø£Ù…Ø§Ù† Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø´Ø®ØµÙŠ
    const GITHUB_TOKEN = "ghp_xnKKPIloAnoC0jcYRwKk7VII1BMvJA0m0hdI"; 
    const REPO_OWNER = "l66hh2-ui";
    const REPO_NAME = "soul-plus-1";
    const FILE_PATH = "apps.json";

    async function addApp() {
        const name = document.getElementById('name').value;
        const desc = document.getElementById('desc').value;
        const icon = document.getElementById('icon').value;
        const plist = document.getElementById('plist').value;
        const status = document.getElementById('status');

        if(!name || !plist) { alert("Ø§Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø§Ù‚ØµØ©!"); return; }

        status.innerText = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ GitHub...";

        const url = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${FILE_PATH}`;

        try {
            const res = await fetch(url, { headers: { "Authorization": `token ${GITHUB_TOKEN}` } });
            const fileData = await res.json();
            
            // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            let currentContent = JSON.parse(decodeURIComponent(escape(atob(fileData.content))));
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            currentContent.push({ name, desc, icon, plist });

            // Ø±ÙØ¹ Ø§Ù„ØªØ­Ø¯ÙŠØ«
            const update = await fetch(url, {
                method: "PUT",
                headers: { "Authorization": `token ${GITHUB_TOKEN}`, "Content-Type": "application/json" },
                body: JSON.stringify({
                    message: `Ø¥Ø¶Ø§ÙØ© ${name}`,
                    content: btoa(unescape(encodeURIComponent(JSON.stringify(currentContent, null, 2)))),
                    sha: fileData.sha
                })
            });

            if(update.ok) {
                status.innerHTML = "<b style='color:#64ffda'>âœ… ØªÙ… Ø§Ù„Ù†Ø´Ø±! Ø­Ø¯Ø« Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø¢Ù†.</b>";
                document.querySelectorAll('input').forEach(i => i.value = "");
            } else {
                status.innerText = "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø´Ø±ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.";
            }
        } catch (e) {
            status.innerText = "Ø®Ø·Ø£: " + e.message;
        }
    }
</script>
</body>
</html>
