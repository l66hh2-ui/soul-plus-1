<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOUL PLUS STORE</title>
    <style>
        body { background: #0a192f; color: white; font-family: sans-serif; text-align: center; padding: 20px; }
        .app-item { background: #112240; padding: 15px; border-radius: 15px; display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; border: 1px solid #233554; }
        .app-img { width: 50px; height: 50px; border-radius: 10px; margin-left: 10px; }
        .btn { background: #64ffda; color: #0a192f; padding: 8px 15px; border-radius: 20px; text-decoration: none; font-weight: bold; font-size: 14px; }
    </style>
</head>
<body>
    <h2>متجر SOUL PLUS</h2>
    <div id="appList">جاري التحميل...</div>

    <script>
        async function load() {
            try {
                // إضافة رقم عشوائي للرابط عشان GitHub ما يعطينا نسخة قديمة مخزنة
                const url = 'apps.json?update=' + Math.floor(Math.random() * 10000);
                const r = await fetch(url);
                if (!r.ok) throw new Error();
                const data = await r.json();
                
                const list = document.getElementById('appList');
                list.innerHTML = ""; // مسح كلمة جاري التحميل

                data.forEach(app => {
                    list.innerHTML += `
                        <div class="app-item">
                            <div style="display:flex; align-items:center;">
                                <img src="${app.icon}" class="app-img">
                                <div style="text-align:right">
                                    <b>${app.name}</b><br>
                                    <small style="color:#8892b0">${app.desc}</small>
                                </div>
                            </div>
                            <a href="itms-services://?action=download-manifest&url=${app.plist}" class="btn">تثبيت</a>
                        </div>`;
                });
            } catch (e) {
                document.getElementById('appList').innerHTML = "تعذر تحميل البيانات. تأكد من وجود ملف apps.json وأنه يحتوي على بيانات صحيحة.";
            }
        }
        load();
    </script>
</body>
</html>
